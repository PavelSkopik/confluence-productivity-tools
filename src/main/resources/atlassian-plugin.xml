<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <param name="plugin-icon">images/pluginIcon.png</param>
        <param name="plugin-logo">images/pluginLogo.png</param>
    </plugin-info>

    <resource type="i18n" name="i18n" location="productivity-tools"/>

    <component-import key="transactionTemplate" interface="com.atlassian.sal.api.transaction.TransactionTemplate"/>

    <component-import key="velocity-renderer" interface="com.atlassian.templaterenderer.TemplateRenderer"/>

    <component-import key="userManager" interface="com.atlassian.sal.api.user.UserManager"/>

    <component-import key="loginUriProvider" interface="com.atlassian.sal.api.auth.LoginUriProvider"/>

    <web-resource key="productivity-tools-admin-resources" name="Admin Web Resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-experimental-progress-indicator</dependency>

        <resource type="download" name="plugin-settings-manager.js" location="js/admin/plugin-settings-manager.js"/>
        <resource type="download" name="plugin-settings.js" location="js/admin/plugin-settings.js"/>
        <resource type="download" name="images/" location="/images"/>

        <context>productivity-tools</context>
    </web-resource>

    <web-resource key="productivity-tools-page-resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:dialog2</dependency>

        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>

        <transformation extension="soy">
            <transformer key="soyTransformer"/>
        </transformation>

        <resource type="download" name="operations.soy.js" location="template/page/operations.soy"/>
        <resource type="download" name="page-operations.js" location="js/page/page-operations.js"/>
        <resource type="download" name="page-operations-manager.js" location="js/page/page-operations-manager.js"/>

        <context>page</context>
    </web-resource>

    <web-section key="productivity-tools-admin-section" name="Productivity Tools" location="system.admin" weight="120"
                 application="confluence">
        <label key="productivitytools.admin.section.label"/>
    </web-section>

    <web-item key="productivity-tools-settings-web-item" name="Settings web item"
              section="system.admin/productivity-tools-admin-section" weigth="7">
        <label key="productivitytools.admin.webitem.settings.label"/>
        <link linkId="productivity-tools-settings-web-item-link">/plugins/servlet/productivity-tools/admin/settings
        </link>
    </web-item>

    <web-item key="page-operations-item" name="Page operations web item" section="system.content.action">
        <link linkId="page-operations-item">#</link>
        <label key="productivitytools.page.menu.tools.item.pageoperations.label"/>
        <!--<condition class="com.atlassian.confluence.plugin.descriptor.web.conditions.CreateContentCondition"/>-->
    </web-item>

    <rest key="productivity-tools-rest-service" name="Productivity Tools REST Service" path="productivity-tools"
          version="1.0"/>

    <servlet key="productivity-tools-settings-servlet" name="Plugin Settings Servlet"
             class="com.skopik.confluence.plugins.productivity.servlet.PluginSettingsServlet">
        <url-pattern>/productivity-tools/admin/settings</url-pattern>
    </servlet>

</atlassian-plugin>